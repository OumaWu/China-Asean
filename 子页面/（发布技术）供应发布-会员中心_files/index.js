$(function(){$("a[render='content']").live("click",function(){if($(this).attr("href").length>0){var a=$(this).attr("href");LoadContent(a)}return false})});String.prototype.trimUrlEnd=function(a){return this.replace(/(\/*$)/g,"")};function LoadContent(b){try{if(typeof(b)==="undefined"){b=""}b=b.toLowerCase();b=b.replace(iDomain,"");if(b.indexOf("server/")<0){var a=location.search;if(a!=""){a=a.replace(/\^/ig,"&");if(b.indexOf("?")>=0){a=a.replace(/\?/ig,"&")}b+=a}b="/server/"+b}}catch(c){}if((location.hostname.toLowerCase()=="my.fjrc.test"||location.hostname.toLowerCase()=="my.rencai.1633.com")&&(b=="/server/home/index")){b="/server/rencai/expert/"}try{$.ajax({type:"get",url:b,cache:false,dataType:"html",beforeSend:function(){LoadMask()},complete:function(){HideMask()},success:function(d){try{$("#contentContainer").html(d)}catch(f){document.getElementById("contentContainer").innerHTML=d}}})}catch(c){}}function LoadMask(){try{if($("#screen").is(":hidden")){$("#screen").show()}if(!$(".load").length){$("body").prepend('<div class="load" id="loaddata" ><img src="http://image.1633.com/images/i/load.gif"></div>')}}catch(a){}}function HideMask(){try{$(".load").remove();$(".screen").hide()}catch(a){}}function SetMeau(){var k=location.pathname.toLocaleLowerCase();var c=k.trimUrlEnd();if(c.indexOf("/ntb/editinvest")>=0||c.indexOf("/ntb/success")>=0){c="/ntb/investlist"}var j=false;$(".ika>span>a").each(function(){var q=$(this);var e=q.attr("href").trimUrlEnd();e=e.toLocaleLowerCase();if(e.indexOf(c)>=0){q.parent().attr("class","on");var m=q.attr("id");$(".ikbl>div#"+m+"sub").show();var o=false;$(".ikbl>div#"+m+"sub li a").each(function(){var s=$(this);var r=s.attr("href").toLowerCase().trimUrlEnd();if(r==e){o=true;s.parent().attr("class","on");document.title=s.html()+"-会员中心";return false}});if(!o){if(c.trim()==""){$(".ikbl>div#"+m+"sub li:first").addClass("on");document.title="首页-会员中心"}else{if(c!="/html/index.html"&&c!="/"){$(".ikbl>div#"+m+"sub li:first").addClass("on");var n=$(".ikbl>div#"+m+"sub li:first a");var l=n.attr("href").toLowerCase();var p=document.domain;l=l.replace("http://"+p+"/","/");k=l}}}j=true;return false}});if(!j){var f=$(".ikbl>div>ul>li>a").toArray().reverse();$(f).each(function(){var n=$(this);var l=n.attr("href").toLocaleLowerCase();if(l.indexOf(c)>=0){n.parent().attr("class","on");var m=n.parent().parent().parent();m.show();var e=m.attr("id");$("#"+e.substr(0,e.length-3)).parent().attr("class","on");document.title=n.html()+"-会员中心";return false}})}if(typeof(IMyMenu)!="undefined"&&$.isFunction(IMyMenu)){}try{if(k.indexOf("action/")>=0){$(".on").removeClass("on");var d="";$("#fathermeau a").each(function(){if($(this).attr("href").indexOf("/action/")>=0){$(this).parent().addClass("on");d=$(this).attr("id")}});var i=/action\/\d+\/apply/;if(i.test(k)){$(".ikbl>div#"+d+"sub").show()}else{$("#sonmeau a").each(function(){if($(this).attr("href").indexOf(location.pathname.toLowerCase())>=0&&$(this).parent().parent().parent().attr("id")==d+"sub"){$(this).parent().addClass("on");$(this).parent().parent().parent().show()}})}}}catch(h){}if(k.indexOf("zhuanlibaike")>=0){var d="";$("#fathermeau a").each(function(){if($(this).attr("href").indexOf("/zhuanlibaike/")>=0){$(this).parent().addClass("on");d=$(this).attr("id")}});var i=/zhuanlibaike\/add\/\d+/;if(i.test(k)||k.indexOf("viewbaike")>0){$("#"+d+"sub a").each(function(){if($(this).attr("href").indexOf("zhuanlibaike/list")>0){$(this).parent().addClass("on");$(this).parent().parent().parent().show()}})}}var a=location.hash;if(k=="/html/index.html"||k=="/"){LoadContent("/server/home/index")}else{if(k.indexOf("hongbao/order/list")>-1&&a!=""){var b=location.hash.replace("#","");LoadContent(b)}else{if(k.indexOf("ntb/investlist")>-1&&a!=""){var b=location.hash.replace("#","");LoadContent(b)}else{if(k.indexOf("/action/")<0){var g=k;LoadContent(g)}}}}}$(function(){$(".iabda span").mouseover(function(){$(".iabda span").removeClass("on");$(this).addClass("on")});$.ajax({url:"/server/meau",type:"get",dataType:"json",cache:false,error:function(a){var t=a.responseText.replace("<script>","").replace("<\/script>","");eval(t)},success:function(json){var i=1;$("#fathermeau").empty();$("#sonmeau").empty();$.each(json,function(){if(this.name=="首页"){$("#fathermeau").prepend('<span id="ikaa"><a href="/" id="m0">会员中心首页</a></span>');var son=this.son;var sonhtml='<div id="m0sub" class="ikbla">';sonhtml+='<p><a href="" target="_blank" title="设置" style="display:none">设置</a>常用功能</p>';sonhtml+="<ul>";$.each(son,function(index){sonhtml+='<li><a href="'+son[index].url+'">'+son[index].name+"</a></li>"});sonhtml+="</ul>";sonhtml+="</div>";$("#sonmeau").prepend(sonhtml)}else{$("#fathermeau").append('<span><a id="m'+i+'" href="'+this.url+'">'+this.name+"</a></span>");sonhtml="";son=this.son;sonhtml='<div id="m'+i+'sub" class="ikbla">';sonhtml+="<ul>";$.each(son,function(index){sonhtml+='<li><a href="'+son[index].url+'">'+son[index].name+"</a></li>"});sonhtml+="</ul>";sonhtml+="</div>";$("#sonmeau").append(sonhtml)}i++});SetMeau()}})});